{% extends "base.html" %}
{% block content %}
  <div class="ui main text container">
    {% block flash_messages %}
      {%- with messages = get_flashed_messages(with_categories=true) -%}
          {% if messages %}
              {% for category, message in messages %}
                  <div class="ui message {{category}}">{{ message|safe }}</div>
              {% endfor %}
          {% endif %}
      {%- endwith %}
    {% endblock %}
    <h1 class="ui header">BOX4security - Reparieren</h1>
    <div class="ui floating tiny message">
      <p>
        Sie haben hier die MÃ¶glichkeit Reperaturen vorzunehmen.
      </p>
    </div>
    <button class="ui button" value="dashboard">Dashboards</button>
    <button class="ui button" value="format">Datenfestplatte formatieren</button>
    <button class="ui button" value="restart">Neustart der BOX4security</button>
    <button class="ui button" value="reset">Reset der BOX4security</button>


  <div class="ui vertical footer segment">
    <div class="ui center aligned container">
    <img src="/static/Box4S_Logo.png" class="ui centered small image">
  </div>
  </div>
{% endblock %}
{% block scripts %}
<script type="text/javascript">
    $('div.item.active').removeClass('active');
    $(`#administration`).addClass('active');


    $(".ui.button").click((e) => {
        fetch(`//{{ request.host }}/api/repair/`,
          {
            method: "POST",
            redirect: 'follow',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({'key': e.target.value})
          })
        .then((response) => {
          if(response.ok)
           {
            console.log("Success");
           }
        })
    })
</script>
{% endblock %}
