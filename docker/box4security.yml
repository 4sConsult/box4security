version: '2.3'

services:
    elasticsearch:
      build: elasticsearch/.
      container_name: elasticsearch
      restart: always
      ports:
       - 9200:9200
      image: "docker-registry.am-gmbh.de/it-security/b4s/elasticsearch:dev"
      volumes:
       - data:/data
    kibana:
      build: kibana/.
      container_name: kibana
      restart: always
      ports:
       - 5601:5601
      image: "docker-registry.am-gmbh.de/it-security/b4s/kibana:dev"
      depends_on:
        elasticsearch:
          condition: service_healthy
      stop_signal: SIGKILL

volumes:
    data:
      external: true
